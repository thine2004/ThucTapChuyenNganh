<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">{{title}}</h1>
    <a href="/admin/users?role={{user.role}}" class="btn btn-sm btn-secondary shadow-sm">
        <i class="fas fa-arrow-left fa-sm text-white-50"></i> Quay lại
    </a>
</div>

<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Cập nhật thông tin</h6>
    </div>
    <div class="card-body">
        <form action="/admin/users/edit/{{user._id}}?_method=PUT" method="POST" enctype="multipart/form-data">
            <div class="form-group text-center mb-4">
                <img src="{{#if user.avatar}}{{user.avatar}}{{else}}/images/default-avatar.png{{/if}}" 
                     class="img-profile rounded-circle mb-2" style="width: 100px; height: 100px; object-fit: cover;">
                <br>
                <label for="avatarFile" class="btn btn-sm btn-outline-primary">Thay đổi ảnh đại diện</label>
                <input type="file" class="form-control-file d-none" id="avatarFile" name="avatarFile">
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="firstName">Tên (First Name) <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="firstName" name="firstName" value="{{user.firstName}}" required>
                </div>
                <div class="form-group col-md-6">
                    <label for="lastName">Họ (Last Name) <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="lastName" name="lastName" value="{{user.lastName}}" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" value="{{user.email}}" readonly>
                    <small class="form-text text-muted">Email không thể thay đổi.</small>
                </div>
                <div class="form-group col-md-6">
                    <label for="role">Vai trò</label>
                     <select class="form-control" id="role" name="role">
                        <option value="user">Người dùng (User)</option>
                        <option value="admin">Quản trị viên (Admin)</option>
                    </select>
                </div>
            </div>


            <div class="form-group">
                <label for="isActive">Trạng thái</label>
                <select class="form-control" id="isActive" name="isActive">
                    <option value="true">Hoạt động</option>
                    <option value="false">Khóa</option>
                </select>
            </div>



            <button type="submit" class="btn btn-primary">
                <i class="fa fa-save"></i> Cập nhật
            </button>
        </form>
    </div>
</div>

<script>
    // Set selected values
    document.getElementById('role').value = "{{user.role}}";
    document.getElementById('isActive').value = "{{user.isActive}}";
</script>
