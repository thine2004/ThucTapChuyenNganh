<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Quản lý Câu hỏi trong Đề: {{test.title}}</h1>
    <a href="/admin/tests" class="btn btn-sm btn-secondary shadow-sm">
        <i class="fas fa-arrow-left fa-sm text-white-50"></i> Quay lại danh sách
    </a>
</div>

<div class="row">
    <!-- Existing Questions in Test -->
    <div class="col-lg-6 mb-4">
        <div class="card shadow mb-4">
            <div class="card-header py-3 d-flex justify-content-between align-items-center">
                <h6 class="m-0 font-weight-bold text-primary">Câu hỏi Đã thêm ({{test.questions.length}})</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive" style="max-height: 500px; overflow-y: auto;">
                    <table class="table table-sm table-bordered">
                        <thead>
                            <tr>
                                <th>Nội dung</th>
                                <th>Loại</th>
                                <th>Xóa</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each test.questions}}
                            <tr>
                                <td><small>{{this.content}}</small></td>
                                <td><small>{{this.type}}</small></td>
                                <td class="text-center">
                                    <form action="/admin/tests/{{../test._id}}/remove-question/{{this._id}}" method="POST">
                                        <button type="submit" class="btn btn-sm btn-danger btn-circle"><i class="fa fa-minus"></i></button>
                                    </form>
                                </td>
                            </tr>
                            {{else}}
                            <tr><td colspan="3" class="text-center">Chưa có câu hỏi nào trong đề này.</td></tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Question Bank to Add -->
    <div class="col-lg-6 mb-4">
        <div class="card shadow mb-4">
            <div class="card-header py-3 d-flex justify-content-between align-items-center">
                <h6 class="m-0 font-weight-bold text-success">Ngân hàng Câu hỏi (Thêm vào đề)</h6>
                 {{!-- Filter form could go here --}}
            </div>
            <div class="card-body">
                <div class="table-responsive" style="max-height: 500px; overflow-y: auto;">
                    <table class="table table-sm table-bordered">
                        <thead>
                            <tr>
                                <th>Nội dung</th>
                                <th>Độ khó</th>
                                <th>Thêm</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each availableQuestions}}
                            <tr>
                                <td><small>{{this.content}}</small></td>
                                <td>
                                    {{#if_eq this.level 'easy'}}<span class="badge badge-success">Dễ</span>{{/if_eq}}
                                    {{#if_eq this.level 'medium'}}<span class="badge badge-warning">TB</span>{{/if_eq}}
                                    {{#if_eq this.level 'hard'}}<span class="badge badge-danger">Khó</span>{{/if_eq}}
                                </td>
                                <td class="text-center">
                                    <form action="/admin/tests/{{../test._id}}/add-question/{{this._id}}" method="POST">
                                        <button type="submit" class="btn btn-sm btn-success btn-circle"><i class="fa fa-plus"></i></button>
                                    </form>
                                </td>
                            </tr>
                             {{else}}
                            <tr><td colspan="3" class="text-center">Hết câu hỏi khả dụng.</td></tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
